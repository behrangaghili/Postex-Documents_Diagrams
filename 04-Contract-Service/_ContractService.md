# Contract Service

---
پنل قرارداد مشتریان شامل موجودیت های مختلفی می باشد و مشتریان با توجه به نوع قرارداد خود می توانند از مشتری عادی که صرفا می تواند ثبت سفارش کند شریک در قسمتی از درآمد شرکت تبدیل شوند 
فرمول محاسبه هزینه ها به این صورت است که:

هزینه نهایی = هزینه پستی (9%+)+خدمات ارزش افزوده(9%+) - تخفیفات

هزینه پستی یا مستقیم از API تامین کننده دریافت میگردد یا از سرویس قیمت گذاری گیت وی

در فرمول بالا منظور از خدمات ارزش افزوده موجودیت های مختلف پنل قرارداد است که در زیر اشاره شده است

- ثبت سفارش
- جمع آور
- لفاف و بسته بندی
- پرینت
- انبار
- توزیع کننده

---

- تخفیف ها
- بازاریابی
- لیزینگ

هر کدام موارد بالا رابطه یک به چند دارند :
  به عنوان مثال یک محصول یا سفارش ممکن است چند جمع آور داشته باشد مانند سیستم کالارسان


---

- آواتار
- پیامک
- کارتون
- کاغذ پرینت
- لفاف



در صورتی که برای مشتری قرارداد خاص منعقد نگردد، قرارداد عمومی برای او استفاده می شود.
  - پیشفرض
   یک قرارداد عمومی برای تمامی مواردی که در محاسبه قیمت و .... تاثیر گذار هستند
  - اختصاصی
   برای فردی و مشتری خاصی در سیستم تعریف می شود به عنوان مثال جمع آوری در شهری که چند جمع آور داریم مثل تهران ، سفارشی که ثبت میشود به کدام یک اختصاص یابد.


## همکاران مرتبط با خدمات ارزش افزوده

- جمع آور
- ثبت کننده
- بسته بند
- لیبل و پرینت
- بازاریاب
- توزیع کننده

هر کدام از موارد ذکر شده یا بر اساس شهر فرستنده و گیرنده تعیین می شوند ویا به صورت اختصاصی در پنل قرارداد  همچنین بر اساس حجم  بسته و نماینده ای که داخل آن منتطقه وجود دارد یا خیر تعریف می شوند.
نکته : هر کدام از این موارد می تواند به یک یا چند نفر اعمال شود
نکته دوم : برخی از موارد فوق باید توسط ادمین (مالی و ...) تایید شود
نکته سوم : هر کدام از گزینه ها دو نوع هزینه تعریف می شود 
  - هزینه تمام شده برای مشتری
  - هزینه برای پستکس

### دسترسی افراد تعریف شده در پنل قرارداد

- دسترسی به انواع ثبت سفارش
- امکان جمع آوری
- امکان توزیع
- آواتار (نشان تجاری )
- دسترسی به سرویس های پسکرایه سی او دی  
- امکان جمع آوری

## فاکتور خدمات پستی

- خدمات پایه پستی
- پیمه و غرامت اجباری
- خدمات فنی و مهندسی (مابه التفاوت قیمت پایه پستی تا مبلغ که مشتری برای خرید سرویس می بیند  )

### فاکتور خدمات ارزش افزوده

- جمع آوری
  - هزینه خرید سرویس
  - هزینه فروش
- بسته بندی
  - خرید
  - فروش
- ثبت سفارش
  - خرید
  - فروش
- لیبل و پرینت
  - خرید
  - فروش
- آواتار
  - فروش
- رهگیری پیامک
  - خرید
  - فروش
- نماینده یا بازاریاب
  - از خدمات فنی و مهندسی به احدی از بازاریابان می رشد
- خدمات ارزش افزوده نمایندگی(مبلغی بین صفر تا صد هزار تومان برای سفارش داخلی و مبلغ صفر تا دویست هزار تومان برای سفارش خارجی)
  - خرید
  - فروش(خرید-9%)

در هر سیستمی ما یک قیمت خرید داریم و یک قیمت فروش،درصد هایی که ما قیمت خرید میگیریم و و درصد مشخص آن را به فروش می رسانیم.
به عنوان مثال جمع آوری در تهران مبلغ 30 هزار تومان به صورت پیشفرض تعیین شده ولی فردی خارج از تهران یک بسته ثبت می کند که هزینه جمع اوری آن می شود 50 هزار تومان ما این مبلغ را به صورت اختصاصی در سفارشات این فرد اعمال می کنیم.

![ContratService](imgs/Contract.png)

## دیاگرام مربوط به پنل قرارداد

[پنل قرارداد](Diagrams/BC1-CustumerPlan.drawio)
![ContractService](imgs/BC1-CustumerPlan.png)

## دیتابیس سرویس قرارداد

[ContractService Database](Diagrams/ContractServiceDatabase.drawio)
![contractservice](imgs/ContractServiceDatabase.png)

## Method

[متد های پنل قرارداد](Diagrams/ContractServiceMethod.drawio)

- CreateEditContract
  ایجاد قرارداد جدید برای مشتری
- DeActiveCurrentContract
  غیرفعال سازی پنل قرارداد مشتری

### مدل های ورودی توابع

- Contract Items Model
  - ContractId
    شناسه قرارداد
  - CustomerId
    شناسه مشتری
  - RegistereContrctor
    ثبت نام
  - RegistereContrctorCost
    درصد ثبتنام کننده
  - PriningContrctorPrice
   هزینه های پرینت
  - AffiliateContrctor
   پنل همکاری در فروش
  - MarketingCommissionValue
   درصد بازاریابی
  - MarketingCommissionLeasing
   درصد بازاریابی لیزینگ
  - PackingContractor
    قرارداد بسته بندی
  - List<PackingItemForContractModel> PackingContractorItems
    موارد موجود در قرارداد بسته بندی
  - LeasingPercent
    درصد لیزینگ
  - ReturnRoofValue
    حداکثر مقدار برگشتی
  - DailyCrediteRoofValue
   سقف اعتبار روزانه
  - ShippingAcceptancePercentageValue
   درصد قبول مرسوله
  - CODPercent
    درصد پرداخت در محل

- Packing Item For Contract Model
  - CartoonItemsName
    نام ایتم بسته بندی
  - CartoonItemsCost
   هزینه بسته بندی
  - CartoonItemsPrice
   قیمت بسته بندی
