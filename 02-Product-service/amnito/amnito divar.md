# تعریف سرویس  (امنیتو دیوار)  

---

## مقدمه

امنیتو یک شیوه پرداخت می باشد. در این سرویس ابتدا مشتری در جت باکس بر روی دکمه پرداخت امن کلیک میکند و بعد از اتصال به سایت پستکس از گیرنده خواسته می شود داخل چت باکس آدرس و مشخصات خود را وارد کند و پرداخت مبلغ فرایند آغاز می شود و برای فرستنده پیامی مبنی بر ثبت مرسوله ارسال می شود 

---

## Feature


### نیازمندی ها امنیتو

- فراخوانی سرویس نوتیفیکیشن
- فراخوانی سرویس یوزر منیجمند
- فرم غرامت و مفقودی
- رفع ایرادات حساب و شبا (اشتباه وارد شدن و یا یکسان نبودن مشخصات )
- فرایند نظر سنجی 
- فرایند عودت وجه 
- فرایند ثبت سفارش api


### قواعد کسب و کار برای امنیتو 

در تعریف امنیتو باید به نکاتی توجه کرد که مهم ترین های آن عبارت است از 

- فروشگاه و کاربر حتما ثبت نام کرده باشند 
- سیستم نوتیفیکیشن به درستی پیاده سازی شود که در هر مرحله پیامک برای ساید مورد نظر ارسال شود 
- در صورت عدم قبول سفارش فرم کنسلی سفارش ایجاد شود و اگر مرسوله دچار خسارت شده است فرم های مفقودی و و غرامت ایجاد شود
- در بازگشت وجه در صورت عدم قبول هزینه پستی کسر شود 
- عدم نمایش سرویس های پرداخت در محل و پس کرایه به مشتری 

 
---

## موجودیت ها

### فروشگاه 

- شماره موبایل
- شماره ملی یا شناسه ملی 
- شماره شبا(لیست)
- (کد پستی و لت و لانگ)لیست آدرس های منتخب 
- نام شرکت و یا فروشگاه
- نام و نام خانوادی مدیر و نماینده ها
-  تاریخچه نظرات مشتی و رنکینگ
-  SLA پاسخ و ارسال

### کاربر 

- شماره موبایل
- شماره کارت و شبا (لیست )
- نام و نام خانوادگی (لیست پزیرندگان)
- لیست آدرس های منتخب (کدپستی)
- وضعیت مشتری (ایرادات)
  
### واسط ها

- پست و پیک 
- بانک 
- پنل پیامکی 
- نقشه 
- پستکس نماینده ها

---

## Methods

متد دریافت چت 
{
Token: token,
ExtraData: chatData.ProviderData,
CallBackURL: callbackURL,
PostToken: chatData.PublicData.PostToken,
UserID: userID,
PeerID: chatData.PublicData.PeerId,
}

متد ارسال نوتیف 
{
"status": "string",
"message": "string",
"url": "string"
}

---

## فرایند ها

فرایند هایی که در این سرویس ورد استفاده قرار میگیرند 

در این سرویس ابتده از چت دیدار شروع می شود و پس کلیک بر روی دکمه پرداخت امن به سامانه پستکس متصل می شود 

![فرایند امنیتو  ](1.jpg)

![فرایند امنیتو  ](3.jpg)

بعد از اتصال به سیستم پستکس نوتیف برای گیرنده و فرستنده ارسال می شود که می بایستی گیرنده اطلاعات خود را داخل چت باکس ارسال کند  و سپس به درگاه پرداخت متصل شود و هزینه کالا و هزینه ارسال را پرداخت میکند
![فرایند امنیتو  ](2.jpg)

 بعد از دریافت اطلاعات چت ورند ثبت سفارش آغاز می شود و گیرنده مبلغ سفارش را پرداخت میکند  اگر گیرنده پرداخت را انجام ندهد سفارش به وضعیت معلق تغییر پیدا میکند و پیامی مبنی بر تکمیل سفارش برای گرینده ارسال خواهد شد و در صورت عدم تکمیل سفارش کنسل خواهد شد و به فرستنده اطلاع رسانی می شود 

بعد از ثبت مرسویه پیامی به فرستنده ارسال می شود تا روند ارسال کالا انجام گیرد اگر قبل از ارسال مرسوله فرستنده از ارسال کالا خودداری کند سفارش کنسل می شود و هزینه ها به گیرنده عودت داد می شود و اگر ارسال انجام گیرد  استاتوس سفارش مورد بررسی قرار میگرد و با تغییر استاتوس برای فرستنده  گیرنده پیام ارسال خواهد شد 
بعد از ارسال کالا اگر گیرنده در محل حاظر نباشد پیامی مبنی بر وارد شدن بسته به باجه معطله ارسال می شود که گیرنده با مراجعه به باجه معطله مرسوله را تعیین و تکلیف کند بعد از دریافت مرسوله در صورتی که مورد قبول گیرنده باشد فرایند تکمیل و مبلغ سفارش به حساب فروشگاه واریز خواهد شد و در صورتی که کالا برگشت بخورد هزینه کالا با کسر هزینه پستی به حساب گیرنده عودت داده میشود و کالا در روند بازگشت به فرستنده قرار خواهد گرفت 

- فرایند غرامت و مفقودی
  در این فرایند اگر مرسوله به دست مشتری رسید و مشتری از قبول مرسوله به دلایل مانند خرابی و آسیب دیدن مرسوله اعتنا کرد و یا مرسوله گم و به دست مشتری نرسید ، فرم های مفقودی و غرامت ایجاد می شود که بعد از بررسی های لازم وجه عودت داده شود.
- فرایند بررسی شماره کارت ، شبا و اطلاعات حساب 
  در این فرایند بعد از اینکه مشتری در ابتدا سفارش اطلاعات بانکی و شخصی خود را وارد کرد بررسی انجام می شود و در صورت وجود مغایرت در اطلاعات پیامکی حاوی رفع نواقص و مغایرت ها برای کاربر ارسال می شود و تا مغایرت رفع نوشد فرایند ارسال انجام نمیگیرد و مراحل عودت وجه و پرداخت وجه هم باید با اطلاعات حساب یکسان باشد.
- فرایند نظر سنجی 
  بعد از ارسال مرسوله جهت کمک به بهبود فرایند امنیتو فرم نظرسنجی ارسال شود و اطلاعات وادر شده بررسی و در دستور کار رفع نواقص احتمالی این سوریس قرار گیرد.
- فرایند عودت وجه 
- فراید ثبت سفارش APi

---

## دیاگرام ها

[فرایند امنیتو ](amnito-flow divar.drawio)
![فرایند امنیتو  ](amnito%20flow.png)


